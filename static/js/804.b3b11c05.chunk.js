"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[804],{8804:function(t,e,n){n.r(e),n.d(e,{default:function(){return Z}});var a=n(8995),r=n(6772),i=n(6969),o=n(7957),s=n(2887),c=n(1109),l=n(1451),d=n(157),u=n(5159),m=function(t,e){for(var n=[],a=t;a<=e;a++)n.push(a);return n},h=n(9919),f=function(t){var e=t.points,n=t.distance,a=e.filter((function(t){return t.altitude&&t.distance})).map((function(t){var e=t.altitude,n=t.distance;return{distance:Number(n/1e3).toFixed(1),elevation:Number(e).toFixed(1)}})),r=m(0,n/1e3);return(0,h.jsx)(i.h,{height:250,width:"100%",children:(0,h.jsxs)(o.T,{data:a,margin:{top:10,right:30,left:0,bottom:0},children:[(0,h.jsx)(s.q,{strokeDasharray:"3 3"}),(0,h.jsx)(c.K,{dataKey:"distance",ticks:r,unit:"km",interval:1}),(0,h.jsx)(l.B,{allowDecimals:!1,unit:"m"}),(0,h.jsx)(d.u,{labelFormatter:function(t){return"Distance: ".concat(t,"km")},formatter:function(t){return"".concat(t,"m")}}),(0,h.jsx)(u.u,{isAnimationActive:!1,type:"monotone",dataKey:"elevation",stroke:"#8884d8",fill:"#8884d8"})]})})},x=n(619),p=n(2569),g=n(4340),j=n(6167),v=function(t){var e=t.points.filter((function(t){return t.distance&&t.speed})).map((function(t){return{distance:Number(t.distance/1e3).toFixed(1),Pace:16.666666666666668/Number(t.speed)}}));e=function(t){return t.filter((function(t){return t.Pace<=20}))}(e);var n=(0,j.useCallback)((function(t){var e=60*t;return"".concat((0,g.iD)(e)," min / km")}),[]),a=(0,j.useCallback)((function(t){return"".concat(t,"km")}),[]);return(0,h.jsx)(i.h,{height:250,width:"100%",children:(0,h.jsxs)(x.w,{data:e,margin:{top:10,right:30,left:0,bottom:0},children:[(0,h.jsx)(s.q,{strokeDasharray:"3 3"}),(0,h.jsx)(c.K,{dataKey:"distance",unit:"km"}),(0,h.jsx)(l.B,{allowDecimals:!1,reversed:!0}),(0,h.jsx)(d.u,{formatter:n,labelFormatter:a}),(0,h.jsx)(p.x,{type:"monotone",dataKey:"Pace",stroke:"#8884d8",dot:!1})]})})};var y=n(2063),b=n(1130),k=1e3/60,w=function(t){var e=function(t){var e=[];if(!t.length||0===t.length)return e;var n=1,a=t[0].time;t.filter((function(t){return t.distance&&t.time})).forEach((function(t,r){if(!(t.distance<1e3*n)){var i=(new Date(t.time).getTime()-new Date(a).getTime())/1e3;e.push({name:n,value:k/Number(1e3/i)}),n++,a=t.time}}));var r=t[t.length-1],i=(new Date(r.time).getTime()-new Date(a).getTime())/1e3,o=r.distance-1e3*(n-1);if(o<100)return e;return e.push({name:n,value:k/Number(o/i)}),e}(t.points);var n=(0,j.useCallback)((function(t){var e=60*t;return"".concat((0,g.iD)(e)," min / km")}),[]);return(0,h.jsx)(i.h,{height:300,width:"100%",children:(0,h.jsxs)(y.v,{data:e,children:[(0,h.jsx)(s.q,{strokeDasharray:"3 3"}),(0,h.jsx)(c.K,{dataKey:"name",unit:"km"}),(0,h.jsx)(l.B,{}),(0,h.jsx)(d.u,{labelFormatter:function(t){return"".concat(t,"km")},formatter:n}),(0,h.jsx)(b.$,{dataKey:"value",fill:"#6fd450"})]})})},N=function(t){var e=t.streamData,n=t.distance,a=e.filter((function(t){return(null===t||void 0===t?void 0:t.heartRate)&&(null===t||void 0===t?void 0:t.distance)})).map((function(t){return{distance:+Number(t.distance/1e3).toFixed(2),heartRate:t.heartRate}})),r=m(0,Number(n/1e3)),f=(0,j.useCallback)((function(t){return"Distance: ".concat(t,"km")}),[]),x=(0,j.useCallback)((function(t){return"".concat(t,"bpm")}),[]);return(0,h.jsx)(h.Fragment,{children:a&&(0,h.jsx)(i.h,{height:250,width:"100%",children:(0,h.jsxs)(o.T,{data:a,margin:{top:10,right:30,left:0,bottom:0},children:[(0,h.jsx)(s.q,{strokeDasharray:"3 3"}),(0,h.jsx)(c.K,{dataKey:"distance",unit:"km",ticks:r}),(0,h.jsx)(l.B,{allowDecimals:!0}),(0,h.jsx)(d.u,{labelFormatter:f,formatter:x}),(0,h.jsx)(u.u,{isAnimationActive:!1,type:"monotone",dataKey:"heartRate",stroke:"#F87666",fill:"#F87666"})]})})})},D=n(3965),T=n(5083),I=n(1780),C=n(7158),F=function(){return(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"16",height:"16",style:{display:"inline-block",verticalAlign:"text-bottom"},children:(0,h.jsx)("path",{"fill-rule":"evenodd",d:"M7.78 12.53a.75.75 0 01-1.06 0L2.47 8.28a.75.75 0 010-1.06l4.25-4.25a.75.75 0 011.06 1.06L4.81 7h7.44a.75.75 0 010 1.5H4.81l2.97 2.97a.75.75 0 010 1.06z"})})},B=(0,D.QM)({statsHeader:{padding:"0rem 1rem"}}),Z=function(t){var e=t.activity,n=t.handleGoBack,i=B();return(0,h.jsxs)(T.Z,{maxWidth:"60rem",margin:"auto",height:"100%",children:[(0,h.jsx)(T.Z,{bg:"canvas.default",borderBottomColor:"border.default",borderBottomWidth:1,borderBottomStyle:"solid",sx:{position:"sticky",top:0,zIndex:1e3,padding:"1rem",display:"flex",justifyContent:"center"},children:(0,h.jsxs)(T.Z,{sx:{display:"grid",gridTemplateColumns:"1fr auto 1fr",justifyContent:"center",maxWidth:"55rem",width:"100%"},children:[(0,h.jsx)("div",{children:(0,h.jsxs)(I.Z,{onClick:n,children:[(0,h.jsx)(F,{}),"Activities"]})}),(0,h.jsx)(C.Z,{as:"h3",sx:{margin:"auto",marginRight:0,fontSize:2},children:null!==e&&void 0!==e&&e.type?e.type:"Loading"})]})}),(null===e||void 0===e?void 0:e.polyline)&&(0,h.jsx)(r.p,{polyline:e.polyline}),e&&e.streamData?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(C.Z,{sx:{fontSize:3,marginTop:4,marginBottom:1},children:"".concat((0,a.Z)(new Date(e.startTime),"EEEE, LLLL d, yyyy")," at ").concat((0,a.Z)(new Date(e.startTime),"HH:mm aaa"))}),(0,h.jsx)(C.Z,{sx:{fontSize:3,marginTop:4,marginBottom:2,textAlign:"center"},children:"Heart Rate"}),(0,h.jsx)(N,{streamData:e.streamData,distance:e.distance}),(0,h.jsx)(C.Z,{sx:{fontSize:3,marginTop:4,marginBottom:2,textAlign:"center"},children:"Elevation"}),(0,h.jsx)(f,{points:e.streamData,distance:e.distance}),(0,h.jsx)(C.Z,{sx:{fontSize:3,marginTop:4,marginBottom:2,textAlign:"center"},children:"Pace"}),(0,h.jsx)(v,{points:e.streamData}),(0,h.jsx)(C.Z,{sx:{fontSize:3,marginTop:4,marginBottom:2,textAlign:"center"},className:i.statsHeader,children:"Splits"}),(0,h.jsx)(w,{points:e.streamData})]}):(0,h.jsx)(r.g,{})]})}},6772:function(t,e,n){n.d(e,{g:function(){return s},p:function(){return f}});var a=n(3965),r=n(5890),i=n(9919),o=(0,a.QM)({container:{width:"100%",display:"flex",justifyContent:"center",margin:"2rem 0"}}),s=function(){var t=o();return(0,i.jsx)("div",{className:t.container,children:(0,i.jsx)(r.Z,{size:"large"})})},c=n(6167),l=n(8425),d=n(2441),u=n.n(d),m=n(599),h=(0,a.QM)({map:{height:"25rem"}}),f=function(t){var e=t.polyline,n=(0,c.useRef)(null),a=h(),r=(0,l.Fg)(),o=(0,c.useCallback)((function(){var t=m.toGeoJSON(e),a=function(t){var e=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return t.reduce((function(t,e){return[Math.min(e[0],t[0]),Math.min(e[1],t[1]),Math.max(e[0],t[2]),Math.max(e[1],t[3])]}),e)}(t.coordinates),i="night"===r.colorMode?"mapbox://styles/mapbox/dark-v10":"mapbox://styles/mapbox/outdoors-v11",o=new(u().Map)({container:n.current||"",style:i,bounds:new(u().LngLatBounds)(a),fitBoundsOptions:{padding:{top:40,bottom:40,left:40,right:40}},accessToken:"pk.eyJ1Ijoiam1tYWwiLCJhIjoiY2tobXJhbHpqMHZmYTJwbnVwY21oaXl6byJ9.CZy7LN4IJff9dD5-orrPHw"});o.addControl(new(u().NavigationControl)),o.scrollZoom.disable(),o.on("load",(function(){o.addSource("route",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:t.coordinates}}}),o.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#008DD5","line-width":4}})}))}),[r.colorMode,e]);return(0,c.useEffect)((function(){o()}),[o]),(0,i.jsx)("div",{ref:n,className:a.map})}}}]);
//# sourceMappingURL=804.b3b11c05.chunk.js.map