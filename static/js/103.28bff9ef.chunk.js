"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[103],{4103:function(t,e,n){n.r(e),n.d(e,{default:function(){return Z}});var a=n(9233),r=n(4870),i=n(9041),o=n(1023),s=n(6609),c=n(2292),l=n(2110),u=n(7257),d=n(8709),m=function(t,e){for(var n=[],a=t;a<=e;a++)n.push(a);return n},f=n(6859),h=function(t){var e=t.points,n=t.distance,a=e.filter((function(t){return t.altitude&&t.distance})).map((function(t){var e=t.altitude,n=t.distance;return{distance:Number(n/1e3).toFixed(1),elevation:Number(e).toFixed(1)}})),r=m(0,n/1e3);return(0,f.jsx)(i.h,{height:250,width:"100%",children:(0,f.jsxs)(o.T,{data:a,margin:{top:10,right:30,left:0,bottom:0},children:[(0,f.jsx)(s.q,{strokeDasharray:"3 3"}),(0,f.jsx)(c.K,{dataKey:"distance",ticks:r,unit:"km",interval:1}),(0,f.jsx)(l.B,{allowDecimals:!1,unit:"m"}),(0,f.jsx)(u.u,{labelFormatter:function(t){return"Distance: ".concat(t,"km")},formatter:function(t){return"".concat(t,"m")}}),(0,f.jsx)(d.u,{isAnimationActive:!1,type:"monotone",dataKey:"elevation",stroke:"#8884d8",fill:"#8884d8"})]})})},x=n(4644),p=n(7409),g=n(8803),j=n(87),v=function(t){var e=t.points.filter((function(t){return t.distance&&t.speed})).map((function(t){return{distance:Number(t.distance/1e3).toFixed(1),Pace:16.666666666666668/Number(t.speed)}}));e=function(t){return t.filter((function(t){return t.Pace<=20}))}(e);var n=(0,j.useCallback)((function(t){var e=60*t;return"".concat((0,g.iD)(e)," min / km")}),[]),a=(0,j.useCallback)((function(t){return"".concat(t,"km")}),[]);return(0,f.jsx)(i.h,{height:250,width:"100%",children:(0,f.jsxs)(x.w,{data:e,margin:{top:10,right:30,left:0,bottom:0},children:[(0,f.jsx)(s.q,{strokeDasharray:"3 3"}),(0,f.jsx)(c.K,{dataKey:"distance",unit:"km"}),(0,f.jsx)(l.B,{allowDecimals:!1,reversed:!0}),(0,f.jsx)(u.u,{formatter:n,labelFormatter:a}),(0,f.jsx)(p.x,{type:"monotone",dataKey:"Pace",stroke:"#8884d8",dot:!1})]})})};var y=n(999),b=n(5713),k=1e3/60,N=function(t){var e=function(t){var e=[];if(!t.length||0===t.length)return e;var n=1,a=t[0].time;t.filter((function(t){return t.distance&&t.time})).forEach((function(t,r){if(!(t.distance<1e3*n)){var i=(new Date(t.time).getTime()-new Date(a).getTime())/1e3;e.push({name:n,value:k/Number(1e3/i)}),n++,a=t.time}}));var r=t[t.length-1],i=(new Date(r.time).getTime()-new Date(a).getTime())/1e3,o=r.distance-1e3*(n-1);if(o<100)return e;return e.push({name:n,value:k/Number(o/i)}),e}(t.points);var n=(0,j.useCallback)((function(t){var e=60*t;return"".concat((0,g.iD)(e)," min / km")}),[]);return(0,f.jsx)(i.h,{height:300,width:"100%",children:(0,f.jsxs)(y.v,{data:e,children:[(0,f.jsx)(s.q,{strokeDasharray:"3 3"}),(0,f.jsx)(c.K,{dataKey:"name",unit:"km"}),(0,f.jsx)(l.B,{}),(0,f.jsx)(u.u,{labelFormatter:function(t){return"".concat(t,"km")},formatter:n}),(0,f.jsx)(b.$,{dataKey:"value",fill:"#6fd450"})]})})},D=function(t){var e=t.streamData,n=t.distance,a=e.filter((function(t){return(null===t||void 0===t?void 0:t.heartRate)&&(null===t||void 0===t?void 0:t.distance)})).map((function(t){return{distance:+Number(t.distance/1e3).toFixed(2),heartRate:t.heartRate}})),r=m(0,Number(n/1e3)),h=(0,j.useCallback)((function(t){return"Distance: ".concat(t,"km")}),[]),x=(0,j.useCallback)((function(t){return"".concat(t,"bpm")}),[]);return(0,f.jsx)(f.Fragment,{children:a&&(0,f.jsx)(i.h,{height:250,width:"100%",children:(0,f.jsxs)(o.T,{data:a,margin:{top:10,right:30,left:0,bottom:0},children:[(0,f.jsx)(s.q,{strokeDasharray:"3 3"}),(0,f.jsx)(c.K,{dataKey:"distance",unit:"km",ticks:r}),(0,f.jsx)(l.B,{allowDecimals:!0}),(0,f.jsx)(u.u,{labelFormatter:h,formatter:x}),(0,f.jsx)(d.u,{isAnimationActive:!1,type:"monotone",dataKey:"heartRate",stroke:"#F87666",fill:"#F87666"})]})})})},w=n(9751),T=n(4361),I=n(8105),C=n(9821),F=n(6135),B=(0,w.QM)({statsHeader:{padding:"0rem 1rem"}}),Z=function(t){var e=t.activity,n=t.handleGoBack,i=B();return(0,f.jsxs)(T.Z,{maxWidth:"60rem",margin:"auto",height:"100%",children:[(0,f.jsx)(T.Z,{bg:"canvas.default",borderBottomColor:"border.default",borderBottomWidth:1,borderBottomStyle:"solid",sx:{position:"sticky",top:0,zIndex:1e3,padding:"1rem",display:"flex",justifyContent:"center"},children:(0,f.jsxs)(T.Z,{sx:{display:"grid",gridTemplateColumns:"1fr auto 1fr",justifyContent:"center",maxWidth:"55rem",width:"100%"},children:[(0,f.jsx)("div",{children:(0,f.jsxs)(I.z,{onClick:n,children:[(0,f.jsx)(F.Y4O,{}),"Activities"]})}),(0,f.jsx)(C.Z,{as:"h3",sx:{margin:"auto",marginRight:0,fontSize:2},children:null!==e&&void 0!==e&&e.type?e.type:"Loading"})]})}),(null===e||void 0===e?void 0:e.polyline)&&(0,f.jsx)(r.p,{polyline:e.polyline}),e&&e.streamData?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(C.Z,{sx:{fontSize:3,marginTop:4,marginBottom:1},children:"".concat((0,a.Z)(new Date(e.startTime),"EEEE, LLLL d, yyyy")," at ").concat((0,a.Z)(new Date(e.startTime),"HH:mm aaa"))}),(0,f.jsx)(C.Z,{sx:{fontSize:3,marginTop:4,marginBottom:2,textAlign:"center"},children:"Heart Rate"}),(0,f.jsx)(D,{streamData:e.streamData,distance:e.distance}),(0,f.jsx)(C.Z,{sx:{fontSize:3,marginTop:4,marginBottom:2,textAlign:"center"},children:"Elevation"}),(0,f.jsx)(h,{points:e.streamData,distance:e.distance}),(0,f.jsx)(C.Z,{sx:{fontSize:3,marginTop:4,marginBottom:2,textAlign:"center"},children:"Pace"}),(0,f.jsx)(v,{points:e.streamData}),(0,f.jsx)(C.Z,{sx:{fontSize:3,marginTop:4,marginBottom:2,textAlign:"center"},className:i.statsHeader,children:"Splits"}),(0,f.jsx)(N,{points:e.streamData})]}):(0,f.jsx)(r.g,{})]})}},4870:function(t,e,n){n.d(e,{g:function(){return s},p:function(){return h}});var a=n(9751),r=n(9194),i=n(6859),o=(0,a.QM)({container:{width:"100%",display:"flex",justifyContent:"center",margin:"2rem 0"}}),s=function(){var t=o();return(0,i.jsx)("div",{className:t.container,children:(0,i.jsx)(r.Z,{size:"large"})})},c=n(87),l=n(9777),u=n(2441),d=n.n(u),m=n(1993),f=(0,a.QM)({map:{height:"25rem"}}),h=function(t){var e=t.polyline,n=(0,c.useRef)(null),a=f(),r=(0,l.Fg)(),o=(0,c.useCallback)((function(){var t=m.toGeoJSON(e),a=function(t){var e=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return t.reduce((function(t,e){return[Math.min(e[0],t[0]),Math.min(e[1],t[1]),Math.max(e[0],t[2]),Math.max(e[1],t[3])]}),e)}(t.coordinates),i="night"===r.colorMode?"mapbox://styles/mapbox/dark-v10":"mapbox://styles/mapbox/outdoors-v11",o=new(d().Map)({container:n.current||"",style:i,bounds:new(d().LngLatBounds)(a),fitBoundsOptions:{padding:{top:40,bottom:40,left:40,right:40}},accessToken:"pk.eyJ1Ijoiam1tYWwiLCJhIjoiY2tobXJhbHpqMHZmYTJwbnVwY21oaXl6byJ9.CZy7LN4IJff9dD5-orrPHw"});o.addControl(new(d().NavigationControl)),o.scrollZoom.disable(),o.on("load",(function(){o.addSource("route",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:t.coordinates}}}),o.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#008DD5","line-width":4}})}))}),[r.colorMode,e]);return(0,c.useEffect)((function(){o()}),[o]),(0,i.jsx)("div",{ref:n,className:a.map})}}}]);
//# sourceMappingURL=103.28bff9ef.chunk.js.map