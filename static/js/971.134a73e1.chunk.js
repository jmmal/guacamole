"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[971],{6971:function(e,t,n){n.r(t),n.d(t,{default:function(){return q}});var r=n(9634),i=n(6995),o=n(6080),a=n.n(o),l=n(6167),c=n(1e3),u=n(3400),s=n(6772),f=n(9828),d=n(1641),p=n(3486),m=n(3648),h=n(3206),g=n(4943),v=n(8408),b=n(5989),x=n(6525),y=f.default.a.withConfig({shouldForwardProp:function(e,t){return!["as","colorProp","focus","hasIcon","hasLabel","reverse"].includes(e)&&t(e)}}).withConfig({displayName:"StyledAnchor",componentId:"sc-1rp7lwl-0"})(["box-sizing:border-box;"," color:",";"," text-decoration:",";cursor:pointer;"," "," "," "," "," ",""],(function(e){return function(e){if(e.size){var t=e.size||"medium",n=e.theme.text[t];return(0,f.css)(["font-size:",";line-height:",";"],n?n.size:t,n?n.height:"normal")}return(0,f.css)(["font-size:inherit;line-height:inherit;"])}(e)}),(function(e){return(0,b.ut)(e.colorProp||e.theme.anchor.color,e.theme)}),(function(e){return e.weight?"font-weight: "+e.weight+";":e.theme.anchor.fontWeight&&"font-weight: "+e.theme.anchor.fontWeight+";"}),(function(e){return e.hasIcon?"none":e.theme.anchor.textDecoration}),h.$G,(function(e){return!e.disabled&&e.theme.anchor.hover&&(0,f.css)(["&:hover{"," "," ","}"],e.theme.anchor.hover.textDecoration&&"text-decoration: "+e.theme.anchor.hover.textDecoration+";",e.theme.anchor.hover.fontWeight&&"font-weight: "+e.theme.anchor.hover.fontWeight+";",e.theme.anchor.hover.extend)}),(function(e){return e.hasIcon&&!e.hasLabel&&"\n    padding: "+e.theme.global.edgeSize.small+";\n  "}),(function(e){return e.disabled&&"\n  opacity: 0.3;\n  cursor: default;\n  text-decoration: none;\n"}),(function(e){return e.focus&&(0,h.jq)()}),(function(e){return e.theme.anchor.extend}));y.defaultProps={},Object.setPrototypeOf(y.defaultProps,m.l);n(7630);var I={},w=["a11yTitle","aria-label","children","color","disabled","gap","href","icon","label","onBlur","onClick","onFocus","reverse"];function j(){return j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j.apply(this,arguments)}var k=(0,l.forwardRef)((function(e,t){var n=e.a11yTitle,r=e["aria-label"],i=e.children,o=e.color,a=e.disabled,c=e.gap,u=void 0===c?"small":c,s=e.href,d=e.icon,p=e.label,h=e.onBlur,g=e.onClick,v=e.onFocus,I=e.reverse,k=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,w),C=(0,l.useContext)(f.ThemeContext)||m.l.theme,E=(0,l.useState)(),O=E[0],z=E[1];(0,l.useEffect)((function(){(d||p)&&i&&console.warn("Anchor should not have children if icon or label is provided")}),[i,d,p]);var S=d;d&&!d.props.color&&(S=(0,l.cloneElement)(d,{color:(0,b.ut)(o||C.anchor.color,C)}));var N=I?p:S,P=I?S:p;return l.createElement(y,j({},k,{ref:t,"aria-label":r||n,colorProp:o,disabled:a,hasIcon:!!d,focus:O,hasLabel:p,reverse:I,href:a?void 0:s,onClick:a?void 0:g,onFocus:function(e){z(!0),v&&v(e)},onBlur:function(e){z(!1),h&&h(e)}}),N&&P?l.createElement(x.x,{as:"span",direction:"row",align:"center",gap:u,responsive:!1,style:{display:"inline-flex"}},N,P):N||P||i)}));k.displayName="Anchor",k.propTypes=I;var C=n(4210),E=n(4811),O=n(7995),z=n(7190),S=f.default.input.withConfig({displayName:"StyledFileInput",componentId:"sc-rl7ywv-0"})(["position:absolute;height:100%;width:100%;"," opacity:0;border:none;"," "," &::-moz-focus-inner{border:none;outline:none;}"],h.hG,(function(e){return!e.disabled&&"cursor: pointer;"}),(function(e){return e.rightOffset&&"\n    width: calc(100% - "+e.rightOffset+"px);\n    right: "+e.rightOffset+"px;\n    "}));S.defaultProps={},Object.setPrototypeOf(S.defaultProps,m.l);var N={},P=["a11yTitle","background","border","confirmRemove","disabled","id","plain","renderFile","maxSize","messages","margin","multiple","name","onChange","pad","value"];function B(){return B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B.apply(this,arguments)}var T=function(e){for(var t=["B","KB","MB","GB","TB"],n=0,r=e;r>=1024&&n<t.length-1;)r/=1024,n+=1;return r.toFixed(1)+" "+t[n]},F=(0,f.default)(x.x).withConfig({displayName:"FileInput__ContentsBox",componentId:"sc-1jzq7im-0"})(["position:relative;"," ",";",";",";"],(function(e){return e.disabled&&(0,h.Cv)()}),(function(e){return e.theme.fileInput&&e.theme.fileInput.extend}),(function(e){return e.hover&&e.theme.fileInput&&e.theme.fileInput.hover&&e.theme.fileInput.hover.extend}),(function(e){return e.dragOver&&e.theme.fileInput&&e.theme.fileInput.dragOver&&e.theme.fileInput.dragOver.extend})),M=(0,f.default)(z.x).withConfig({displayName:"FileInput__Label",componentId:"sc-1jzq7im-1"})(["",";"],(function(e){return e.theme.fileInput&&e.theme.fileInput.label&&e.theme.fileInput.label.extend})),L=(0,f.default)(z.x).withConfig({displayName:"FileInput__Message",componentId:"sc-1jzq7im-2"})(["",";"],(function(e){return e.theme.fileInput&&e.theme.fileInput.message&&e.theme.fileInput.message.extend})),R={event:void 0,index:void 0},D=(0,l.forwardRef)((function(e,t){e.a11yTitle,e.background,e.border;var n,r,i,o=e.confirmRemove,a=e.disabled,c=e.id,u=e.plain,s=e.renderFile,m=e.maxSize,h=e.messages,b=(e.margin,e.multiple),y=e.name,I=e.onChange,w=(e.pad,e.value),j=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,P),z=(0,l.useContext)(f.ThemeContext),N=(0,l.useContext)(p.E).format,D=(0,l.useContext)(E.q),W=l.useState(),_=W[0],A=W[1],G=l.useState(),Y=G[0],q=G[1],J=(0,l.useState)(!1),V=J[0],Z=J[1],U=(0,l.useState)(R),H=U[0],Q=U[1],X=b&&b.aggregateThreshold||10,K=null==b?void 0:b.max,$=(0,g.t)(t),ee=(0,l.useRef)(),te=(0,l.useRef)(),ne=o,re=z.fileInput.icons.remove,ie=D.useFormInput({name:y,value:w,initialValue:[],validate:[m?function(){var e="",t=[].concat(oe).filter((function(e){return e.size>m})).length;if(t){var n="fileInput.maxSizeSingle";b&&(n="fileInput.maxSizeMultiple."+(1===t?"singular":"plural")),e=N({id:n,messages:h,values:{maxSize:T(m),numOfFiles:t}})}return e}:"",K?function(){var e="";return[].concat(oe).length>K&&(e=N({id:"fileInput.maxFile",messages:h,values:{max:K}})),e}:""]}),oe=ie[0],ae=ie[1],le=function(e,t){var n={},r=z.fileInput[e];r&&("object"!==typeof r?t?n[t]=r:n=r:n=B({},r));var i=z.fileInput.hover[e];_&&i&&("object"!==typeof i?t?n[t]=i:n=i:n=B({},n,i));var o=z.fileInput.dragOver[e];return Y&&o&&("object"!==typeof o?t?n[t]=o:n=o:n=B({},n,o)),"object"===typeof n&&0===Object.keys(n).length?void 0:n};if(le("pad")){var ce=le("pad"),ue=ce.horizontal,se=ce.right;se?n=z.global.edgeSize[se]||se:ue&&(n=z.global.edgeSize[ue]||ue)}if(te.current&&ee.current){var fe=ee.current.getBoundingClientRect().width,de=te.current.getBoundingClientRect().width;n&&"string"===typeof n&&(r=de+(0,v.gd)(n)),r=1===oe.length||oe.length>X?fe+de+2*(0,v.gd)(z.global.edgeSize.small):fe>de?fe+2*(0,v.gd)(z.global.edgeSize.small):de}else!oe.length&&ee.current&&(r=ee.current.getBoundingClientRect().width+2*(0,v.gd)(z.global.edgeSize.small));i=oe.length?oe.length+" items":N({id:b?"fileInput.dropPromptMultiple":"fileInput.dropPrompt",messages:h});var pe=function(e,t){var n;e.stopPropagation(),"all"===t?n=[]:(n=[].concat(oe)).splice(t,1),ae(n),I&&I(e,{files:n}),0===n.length&&($.current.value=""),$.current.focus()};return l.createElement(l.Fragment,null,l.createElement(F,{theme:z,flex:!1,disabled:a,background:le("background","color"),border:u?void 0:le("border","side"),margin:le("margin"),pad:le("pad"),round:le("round","size"),align:oe.length?"stretch":"center",justify:"center",hover:_,onMouseOver:a?void 0:function(){return A(!0)},onMouseOut:a?void 0:function(){return A(!1)},dragOver:Y},(!oe.length||oe.length>1)&&l.createElement(x.x,{align:"center",fill:"horizontal",direction:"row",justify:"between"},oe.length<=X&&l.createElement(l.Fragment,null,l.createElement(L,z.fileInput.message,i),l.createElement(O.N,{onSpace:function(e){ee.current===e.target&&$.current.click()},onEnter:function(e){ee.current===e.target&&$.current.click()}},z.fileInput.button?l.createElement(C.z,{ref:ee,kind:z.fileInput.button,label:N({id:"fileInput.browse",messages:h}),onClick:function(){$.current.click(),$.current.focus()}}):l.createElement(k,{tabIndex:0,alignSelf:"center",ref:ee,margin:"small",onClick:function(){$.current.click(),$.current.focus()},label:N({id:"fileInput.browse",messages:h})})))),oe.length>X&&l.createElement(x.x,{justify:"between",direction:"row",align:"center"},l.createElement(M,z.fileInput.label,oe.length," ",N({id:"fileInput.files",messages:h})),l.createElement(x.x,{flex:!1,direction:"row",align:"center"},l.createElement(C.z,{ref:te,a11yTitle:N({id:"fileInput.removeAll",messages:h}),icon:l.createElement(re,null),hoverIndicator:!0,onClick:function(e){o?(e.persist(),Q({event:e,index:"all"}),Z(!0)):pe(e,"all")}}),l.createElement(O.N,{onSpace:function(e){ee.current===e.target&&$.current.click()},onEnter:function(e){ee.current===e.target&&$.current.click()}},z.fileInput.button?l.createElement(C.z,{ref:ee,kind:z.fileInput.button,label:N({id:"fileInput.browse",messages:h}),onClick:function(){$.current.click(),$.current.focus()}}):l.createElement(k,{tabIndex:0,alignSelf:"center",ref:ee,margin:"small",onClick:function(){$.current.click(),$.current.focus()},label:N({id:"fileInput.browse",messages:h})})))),oe.length>0&&oe.length<=X&&oe.map((function(e,t){return l.createElement(x.x,{key:e.name,justify:"between",direction:"row",align:"center"},s?s(e):l.createElement(x.x,B({},z.fileInput.label,{gap:"xsmall",align:"center",direction:"row"}),(m&&e.size>m||K&&t>=K)&&l.createElement(d.B,null),l.createElement(M,{weight:z.global.input.weight||z.global.input.font.weight,truncate:!0},e.name)),l.createElement(x.x,{flex:!1,direction:"row",align:"center"},l.createElement(C.z,{ref:t?void 0:te,a11yTitle:N({id:"fileInput.remove",messages:h})+" "+e.name,icon:l.createElement(re,null),hoverIndicator:!0,onClick:function(e){o?(e.persist(),Q({event:e,index:t}),Z(!0)):pe(e,t)}}),1===oe.length&&l.createElement(O.N,{onSpace:function(e){ee.current===e.target&&$.current.click()},onEnter:function(e){ee.current===e.target&&$.current.click()}},z.fileInput.button?l.createElement(C.z,{ref:ee,kind:z.fileInput.button,label:N({id:"fileInput.browse",messages:h}),onClick:function(){$.current.click(),$.current.focus()}}):l.createElement(k,{tabIndex:0,ref:ee,margin:"small",onClick:function(){$.current.click(),$.current.focus()},label:N({id:"fileInput.browse",messages:h})}))))})),l.createElement(S,B({ref:$,type:"file",id:c,name:y,maxSize:m,multiple:b,disabled:a,plain:!0,rightOffset:r},j,{onDragOver:function(){return q(!0)},onDragLeave:function(){return q(!1)},onChange:function(e){e.persist();for(var t=e.target.files,n=b?[].concat(oe):[],r=function(e){n.filter((function(n){return n.name===t[e].name&&n.size===t[e].size})).length>0||n.push(t[e])},i=0;i<t.length;i+=1)r(i);ae(n),q(!1),I&&I(e,{files:n})}}))),V&&l.createElement(ne,{onConfirm:function(){pe(H.event,H.index),Q(R),Z(!1)},onCancel:function(){return Z(!1)}}))}));D.defaultProps={},Object.setPrototypeOf(D.defaultProps,m.l),D.displayName="FileInput",D.propTypes=N;var W=n(1763),_=n(5160),A=n(9919),G="https://t9mdzi08qi.execute-api.ap-southeast-2.amazonaws.com/Staging",Y=(0,_.QM)({container:{display:"flex",justifyContent:"center",width:"100%"},content:{width:"calc(100% - 2rem)",maxWidth:"30rem"},actions:{display:"flex",flexWrap:"wrap",justifyContent:"space-between"},fileInput:{marginTop:"1rem",marginBottom:"1rem"},actionBtn:{minWidth:"calc(50% - 0.5rem)",marginBottom:"1rem"}}),q=function(){var e=(0,u.s0)(),t=Y(),n=(0,l.useState)(!1),o=(0,i.Z)(n,2),f=o[0],d=o[1],p=(0,l.useState)(),m=(0,i.Z)(p,2),h=m[0],g=m[1];function v(){return(v=(0,r.Z)(a().mark((function t(){var n,r,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!h){t.next=14;break}return d(!0),(n=new URLSearchParams).append("filename",h.name),t.next=6,fetch(G+"/upload?"+n.toString());case 6:return r=t.sent,t.next=9,r.json();case 9:return i=t.sent,t.next=12,fetch(i.uploadURL,{method:"PUT",headers:{"Content-Type":"binary/octet-stream"},body:h});case 12:d(!1),e("/activities");case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,A.jsx)("div",{className:t.container,children:(0,A.jsxs)("div",{className:t.content,children:[(0,A.jsx)(W.X,{id:"inputGroupFileAddon01",level:"2",children:"Upload"}),(0,A.jsx)(z.x,{children:"Accepted file types: '.gpx'"}),(0,A.jsx)("div",{className:t.fileInput,children:(0,A.jsx)(D,{onChange:function(e){var t,n=null===(t=e.target.files)||void 0===t?void 0:t.item(0);n&&g(n)}})}),(0,A.jsxs)("div",{className:t.actions,children:[(0,A.jsx)(c.rU,{to:"/activities",className:t.actionBtn,children:(0,A.jsx)(C.z,{type:"button",label:"Go Back",fill:"horizontal"})}),(0,A.jsx)(C.z,{label:"Submit",type:"submit",className:t.actionBtn,onClick:function(){return v.apply(this,arguments)},disabled:!h})]}),f&&(0,A.jsx)(s.g,{})]})})}},6772:function(e,t,n){n.d(t,{g:function(){return c},p:function(){return p}});var r=n(6167),i=n(5160),o=n(2049),a=n(9919),l=(0,i.QM)({container:{width:"100%",display:"flex",justifyContent:"center",margin:"2rem 0"}}),c=function(){var e=l();return(0,a.jsx)("div",{className:e.container,children:(0,a.jsx)(o.BeatLoader,{size:"30px",margin:"4px",color:"#7D4CDB"})})},u=n(2441),s=n.n(u),f=n(599),d=(0,i.QM)({map:{height:"25rem"}}),p=function(e){var t=e.polyline,n=(0,r.useRef)(null),i=d();(0,r.useEffect)((function(){o()}));var o=function(){var e=f.toGeoJSON(t),r=function(e){var t=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return e.reduce((function(e,t){return[Math.min(t[0],e[0]),Math.min(t[1],e[1]),Math.max(t[0],e[2]),Math.max(t[1],e[3])]}),t)}(e.coordinates),i=new(s().Map)({container:n.current||"",style:"mapbox://styles/mapbox/outdoors-v11",bounds:new(s().LngLatBounds)(r),fitBoundsOptions:{padding:{top:40,bottom:40,left:40,right:40}},accessToken:"pk.eyJ1Ijoiam1tYWwiLCJhIjoiY2tobXJhbHpqMHZmYTJwbnVwY21oaXl6byJ9.CZy7LN4IJff9dD5-orrPHw"});i.addControl(new(s().NavigationControl)),i.scrollZoom.disable(),i.on("load",(function(){i.addSource("route",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:e.coordinates}}}),i.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#008DD5","line-width":4}})}))};return(0,a.jsx)("div",{ref:n,className:i.map})}},1641:function(e,t,n){t.B=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n(6167)),i=n(9598);function o(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}var l=(0,r.forwardRef)((function(e,t){return r.default.createElement(i.StyledIcon,a({ref:t,viewBox:"0 0 24 24",a11yTitle:"CircleAlert"},e),r.default.createElement("path",{stroke:"#000",strokeWidth:"2",d:"M12 14V6m0 12v-2m0-14C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2z"}))}));t.B=l,l.displayName="CircleAlert"}}]);
//# sourceMappingURL=971.134a73e1.chunk.js.map