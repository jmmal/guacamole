(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[6],{487:function(e,t,a){"use strict";a.d(t,"b",(function(){return m})),a.d(t,"a",(function(){return o}));var n=a(0),r=a(39),i=a(488),c=a(5),s=Object(r.a)({container:{width:"100%",display:"flex",justifyContent:"center",margin:"2rem 0"}}),o=function(){var e=s();return Object(c.jsx)("div",{className:e.container,children:Object(c.jsx)(i.BeatLoader,{size:"30px",margin:"4px",color:"#7D4CDB"})})},l=a(490),d=a.n(l),u=a(491),j=Object(r.a)({map:{height:"25rem"}}),m=function(e){var t=e.polyline,a=Object(n.useRef)(null),r=j();Object(n.useEffect)((function(){i()}));var i=function(){var e=u.toGeoJSON(t),n=function(e){var t=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return e.reduce((function(e,t){return[Math.min(t[0],e[0]),Math.min(t[1],e[1]),Math.max(t[0],e[2]),Math.max(t[1],e[3])]}),t)}(e.coordinates),r=new d.a.Map({container:a.current||"",style:"mapbox://styles/mapbox/outdoors-v11",bounds:new d.a.LngLatBounds(n),fitBoundsOptions:{padding:{top:40,bottom:40,left:40,right:40}},accessToken:"pk.eyJ1Ijoiam1tYWwiLCJhIjoiY2tobXJhbHpqMHZmYTJwbnVwY21oaXl6byJ9.CZy7LN4IJff9dD5-orrPHw"});r.addControl(new d.a.NavigationControl),r.scrollZoom.disable(),r.on("load",(function(){r.addSource("route",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:e.coordinates}}}),r.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#008DD5","line-width":4}})}))};return Object(c.jsx)("div",{ref:a,className:r.map})}},531:function(e,t,a){"use strict";a.r(t);var n=a(532),r=a(471),i=a(487),c=a(0),s=a(464),o=a(526),l=a(527),d=a(485),u=a(486),j=a(120),m=a(520),b=a(194),h=a(5),f=function(e){var t=e.points,a=e.distance,n=t.filter((function(e){return e.altitude&&e.distance})).map((function(e){var t=e.altitude,a=e.distance;return{distance:Number(a/1e3).toFixed(1),elevation:Number(t).toFixed(1)}})),r=Object(b.b)(0,a/1e3);return Object(h.jsx)(s.a,{height:250,width:"100%",children:Object(h.jsxs)(o.a,{data:n,margin:{top:10,right:30,left:0,bottom:0},children:[Object(h.jsx)(l.a,{strokeDasharray:"3 3"}),Object(h.jsx)(d.a,{dataKey:"distance",ticks:r,unit:"km",interval:1}),Object(h.jsx)(u.a,{allowDecimals:!1,unit:"m"}),Object(h.jsx)(j.a,{labelFormatter:function(e){return"Distance: ".concat(e,"km")},formatter:function(e){return"".concat(e,"m")}}),Object(h.jsx)(m.a,{isAnimationActive:!1,type:"monotone",dataKey:"elevation",stroke:"#8884d8",fill:"#8884d8"})]})})},O=a(528),x=a(521),p=a(58);var v=function(e){var t=e.points.filter((function(e){return e.distance&&e.speed})).map((function(e){return{distance:Number(e.distance/1e3).toFixed(1),Pace:16.666666666666668/Number(e.speed)}}));t=function(e){return e.filter((function(e){return e.Pace<=20}))}(t);var a=Object(c.useCallback)((function(e){var t=60*e;return"".concat(Object(p.d)(t)," min / km")}),[]),n=Object(c.useCallback)((function(e){return"".concat(e,"km")}),[]);return Object(h.jsx)(s.a,{height:250,width:"100%",children:Object(h.jsxs)(O.a,{data:t,margin:{top:10,right:30,left:0,bottom:0},children:[Object(h.jsx)(l.a,{strokeDasharray:"3 3"}),Object(h.jsx)(d.a,{dataKey:"distance",unit:"km"}),Object(h.jsx)(u.a,{allowDecimals:!1,reversed:!0}),Object(h.jsx)(j.a,{formatter:a,labelFormatter:n}),Object(h.jsx)(x.a,{type:"monotone",dataKey:"Pace",stroke:"#8884d8",dot:!1})]})})},y=a(529),g=a(522),N=1e3/60,k=function(e){var t=function(e){var t=[];if(!e.length||0===e.length)return t;var a=1,n=e[0].time;e.filter((function(e){return e.distance&&e.time})).forEach((function(e,r){if(!(e.distance<1e3*a)){var i=(new Date(e.time).getTime()-new Date(n).getTime())/1e3;t.push({name:a,value:N/Number(1e3/i)}),a++,n=e.time}}));var r=e[e.length-1],i=(new Date(r.time).getTime()-new Date(n).getTime())/1e3,c=r.distance-1e3*(a-1);if(c<100)return t;return t.push({name:a,value:N/Number(c/i)}),t}(e.points);var a=Object(c.useCallback)((function(e){var t=60*e;return"".concat(Object(p.d)(t)," min / km")}),[]);return Object(h.jsx)(s.a,{height:500,width:"100%",children:Object(h.jsxs)(y.a,{data:t,children:[Object(h.jsx)(l.a,{strokeDasharray:"3 3"}),Object(h.jsx)(d.a,{dataKey:"name",unit:"km"}),Object(h.jsx)(u.a,{}),Object(h.jsx)(j.a,{labelFormatter:function(e){return"".concat(e,"km")},formatter:a}),Object(h.jsx)(g.a,{dataKey:"value",fill:"#6fd450"})]})})},D=function(e){var t=e.streamData,a=e.distance,n=t.filter((function(e){return(null===e||void 0===e?void 0:e.heartRate)&&(null===e||void 0===e?void 0:e.distance)})).map((function(e){return{distance:+Number(e.distance/1e3).toFixed(2),heartRate:e.heartRate}})),r=Object(b.b)(0,Number(a/1e3)),i=Object(c.useCallback)((function(e){return"Distance: ".concat(e,"km")}),[]),f=Object(c.useCallback)((function(e){return"".concat(e,"bpm")}),[]);return Object(h.jsx)(h.Fragment,{children:n&&Object(h.jsx)(s.a,{height:250,width:"100%",children:Object(h.jsxs)(o.a,{data:n,margin:{top:10,right:30,left:0,bottom:0},children:[Object(h.jsx)(l.a,{strokeDasharray:"3 3"}),Object(h.jsx)(d.a,{dataKey:"distance",unit:"km",ticks:r}),Object(h.jsx)(u.a,{allowDecimals:!0}),Object(h.jsx)(j.a,{labelFormatter:i,formatter:f}),Object(h.jsx)(m.a,{isAnimationActive:!1,type:"monotone",dataKey:"heartRate",stroke:"#F87666",fill:"#F87666"})]})})})},w=a(39),I=a(474),F=a(480),T=Object(w.a)({header:{position:"sticky",top:0,borderBottom:"1px solid #e0e0e0",zIndex:1e3,backgroundColor:"white",padding:"1rem",display:"flex",justifyContent:"center"},headerLayout:{display:"grid",gridTemplateColumns:"1fr auto 1fr",justifyContent:"center",maxWidth:"55rem",width:"100%"},marginAuto:{margin:"auto",marginRight:0},statsHeader:{padding:"0rem 1rem"}});t.default=function(e){var t=e.activity,a=e.handleGoBack,c=T();return Object(h.jsxs)("div",{className:"activity-component",children:[Object(h.jsx)("div",{className:c.header,children:Object(h.jsxs)("div",{className:c.headerLayout,children:[Object(h.jsx)("div",{children:Object(h.jsx)(I.a,{onClick:a,icon:Object(h.jsx)(n.a,{}),label:"Activities",size:"small"})}),Object(h.jsx)(F.a,{level:"3",className:c.marginAuto,children:(null===t||void 0===t?void 0:t.type)?t.type:"Loading"})]})}),(null===t||void 0===t?void 0:t.polyline)&&Object(h.jsx)(i.b,{polyline:t.polyline}),t&&t.streamData?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(F.a,{level:"2",className:c.statsHeader,children:"".concat(Object(r.a)(new Date(t.startTime),"EEEE, LLLL d, yyyy")," at ").concat(Object(r.a)(new Date(t.startTime),"HH:mm aaa"))}),Object(h.jsx)(F.a,{level:"3",className:c.statsHeader,children:"Heart Rate"}),Object(h.jsx)(D,{streamData:t.streamData,distance:t.distance}),Object(h.jsx)(F.a,{level:"3",className:c.statsHeader,children:"Elevation"}),Object(h.jsx)(f,{points:t.streamData,distance:t.distance}),Object(h.jsx)(F.a,{level:"3",className:c.statsHeader,children:"Pace"}),Object(h.jsx)(v,{points:t.streamData}),Object(h.jsx)(F.a,{level:"3",className:c.statsHeader,children:"Splits"}),Object(h.jsx)(k,{points:t.streamData})]}):Object(h.jsx)(i.a,{})]})}}}]);
//# sourceMappingURL=6.89f442c1.chunk.js.map