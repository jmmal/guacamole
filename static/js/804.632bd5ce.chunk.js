"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[804],{8804:function(e,t,a){a.r(t),a.d(t,{default:function(){return L}});var n=a(8995),r=a(6772),i=a(6969),s=a(7957),o=a(2887),c=a(1109),l=a(1451),d=a(157),u=a(5159),m=function(e,t){for(var a=[],n=e;n<=t;n++)a.push(n);return a},h=a(9919),f=function(e){var t=e.points,a=e.distance,n=t.filter((function(e){return e.altitude&&e.distance})).map((function(e){var t=e.altitude,a=e.distance;return{distance:Number(a/1e3).toFixed(1),elevation:Number(t).toFixed(1)}})),r=m(0,a/1e3);return(0,h.jsx)(i.h,{height:250,width:"100%",children:(0,h.jsxs)(s.T,{data:n,margin:{top:10,right:30,left:0,bottom:0},children:[(0,h.jsx)(o.q,{strokeDasharray:"3 3"}),(0,h.jsx)(c.K,{dataKey:"distance",ticks:r,unit:"km",interval:1}),(0,h.jsx)(l.B,{allowDecimals:!1,unit:"m"}),(0,h.jsx)(d.u,{labelFormatter:function(e){return"Distance: ".concat(e,"km")},formatter:function(e){return"".concat(e,"m")}}),(0,h.jsx)(u.u,{isAnimationActive:!1,type:"monotone",dataKey:"elevation",stroke:"#8884d8",fill:"#8884d8"})]})})},x=a(619),p=a(2569),j=a(4340),v=a(6167),g=function(e){var t=e.points.filter((function(e){return e.distance&&e.speed})).map((function(e){return{distance:Number(e.distance/1e3).toFixed(1),Pace:16.666666666666668/Number(e.speed)}}));t=function(e){return e.filter((function(e){return e.Pace<=20}))}(t);var a=(0,v.useCallback)((function(e){var t=60*e;return"".concat((0,j.iD)(t)," min / km")}),[]),n=(0,v.useCallback)((function(e){return"".concat(e,"km")}),[]);return(0,h.jsx)(i.h,{height:250,width:"100%",children:(0,h.jsxs)(x.w,{data:t,margin:{top:10,right:30,left:0,bottom:0},children:[(0,h.jsx)(o.q,{strokeDasharray:"3 3"}),(0,h.jsx)(c.K,{dataKey:"distance",unit:"km"}),(0,h.jsx)(l.B,{allowDecimals:!1,reversed:!0}),(0,h.jsx)(d.u,{formatter:a,labelFormatter:n}),(0,h.jsx)(p.x,{type:"monotone",dataKey:"Pace",stroke:"#8884d8",dot:!1})]})})};var y=a(2063),b=a(1130),k=1e3/60,N=function(e){var t=function(e){var t=[];if(!e.length||0===e.length)return t;var a=1,n=e[0].time;e.filter((function(e){return e.distance&&e.time})).forEach((function(e,r){if(!(e.distance<1e3*a)){var i=(new Date(e.time).getTime()-new Date(n).getTime())/1e3;t.push({name:a,value:k/Number(1e3/i)}),a++,n=e.time}}));var r=e[e.length-1],i=(new Date(r.time).getTime()-new Date(n).getTime())/1e3,s=r.distance-1e3*(a-1);if(s<100)return t;return t.push({name:a,value:k/Number(s/i)}),t}(e.points);var a=(0,v.useCallback)((function(e){var t=60*e;return"".concat((0,j.iD)(t)," min / km")}),[]);return(0,h.jsx)(i.h,{height:500,width:"100%",children:(0,h.jsxs)(y.v,{data:t,children:[(0,h.jsx)(o.q,{strokeDasharray:"3 3"}),(0,h.jsx)(c.K,{dataKey:"name",unit:"km"}),(0,h.jsx)(l.B,{}),(0,h.jsx)(d.u,{labelFormatter:function(e){return"".concat(e,"km")},formatter:a}),(0,h.jsx)(b.$,{dataKey:"value",fill:"#6fd450"})]})})},w=function(e){var t=e.streamData,a=e.distance,n=t.filter((function(e){return(null===e||void 0===e?void 0:e.heartRate)&&(null===e||void 0===e?void 0:e.distance)})).map((function(e){return{distance:+Number(e.distance/1e3).toFixed(2),heartRate:e.heartRate}})),r=m(0,Number(a/1e3)),f=(0,v.useCallback)((function(e){return"Distance: ".concat(e,"km")}),[]),x=(0,v.useCallback)((function(e){return"".concat(e,"bpm")}),[]);return(0,h.jsx)(h.Fragment,{children:n&&(0,h.jsx)(i.h,{height:250,width:"100%",children:(0,h.jsxs)(s.T,{data:n,margin:{top:10,right:30,left:0,bottom:0},children:[(0,h.jsx)(o.q,{strokeDasharray:"3 3"}),(0,h.jsx)(c.K,{dataKey:"distance",unit:"km",ticks:r}),(0,h.jsx)(l.B,{allowDecimals:!0}),(0,h.jsx)(d.u,{labelFormatter:f,formatter:x}),(0,h.jsx)(u.u,{isAnimationActive:!1,type:"monotone",dataKey:"heartRate",stroke:"#F87666",fill:"#F87666"})]})})})},D=a(1978),I=a(1780),T=a(7158),C=function(){return(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"16",height:"16",style:{display:"inline-block",verticalAlign:"text-bottom"},children:(0,h.jsx)("path",{"fill-rule":"evenodd",d:"M7.78 12.53a.75.75 0 01-1.06 0L2.47 8.28a.75.75 0 010-1.06l4.25-4.25a.75.75 0 011.06 1.06L4.81 7h7.44a.75.75 0 010 1.5H4.81l2.97 2.97a.75.75 0 010 1.06z"})})},F=(0,D.QM)({header:{position:"sticky",top:0,borderBottom:"1px solid #e0e0e0",zIndex:1e3,backgroundColor:"white",padding:"1rem",display:"flex",justifyContent:"center"},headerLayout:{display:"grid",gridTemplateColumns:"1fr auto 1fr",justifyContent:"center",maxWidth:"55rem",width:"100%"},marginAuto:{margin:"auto",marginRight:0},statsHeader:{padding:"0rem 1rem"},container:{maxWidth:"60rem",margin:"auto"}}),L=function(e){var t=e.activity,a=e.handleGoBack,i=F();return(0,h.jsxs)("div",{className:i.container,children:[(0,h.jsx)("div",{className:i.header,children:(0,h.jsxs)("div",{className:i.headerLayout,children:[(0,h.jsx)("div",{children:(0,h.jsxs)(I.Z,{onClick:a,children:[(0,h.jsx)(C,{}),"Activities"]})}),(0,h.jsx)(T.Z,{as:"h3",className:i.marginAuto,children:null!==t&&void 0!==t&&t.type?t.type:"Loading"})]})}),(null===t||void 0===t?void 0:t.polyline)&&(0,h.jsx)(r.p,{polyline:t.polyline}),t&&t.streamData?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(T.Z,{className:i.statsHeader,children:"".concat((0,n.Z)(new Date(t.startTime),"EEEE, LLLL d, yyyy")," at ").concat((0,n.Z)(new Date(t.startTime),"HH:mm aaa"))}),(0,h.jsx)(T.Z,{className:i.statsHeader,children:"Heart Rate"}),(0,h.jsx)(w,{streamData:t.streamData,distance:t.distance}),(0,h.jsx)(T.Z,{className:i.statsHeader,children:"Elevation"}),(0,h.jsx)(f,{points:t.streamData,distance:t.distance}),(0,h.jsx)(T.Z,{className:i.statsHeader,children:"Pace"}),(0,h.jsx)(g,{points:t.streamData}),(0,h.jsx)(T.Z,{className:i.statsHeader,children:"Splits"}),(0,h.jsx)(N,{points:t.streamData})]}):(0,h.jsx)(r.g,{})]})}},6772:function(e,t,a){a.d(t,{g:function(){return o},p:function(){return f}});var n=a(1978),r=a(5890),i=a(9919),s=(0,n.QM)({container:{width:"100%",display:"flex",justifyContent:"center",margin:"2rem 0"}}),o=function(){var e=s();return(0,i.jsx)("div",{className:e.container,children:(0,i.jsx)(r.Z,{size:"large"})})},c=a(6167),l=a(8425),d=a(2441),u=a.n(d),m=a(599),h=(0,n.QM)({map:{height:"25rem"}}),f=function(e){var t=e.polyline,a=(0,c.useRef)(null),n=h(),r=(0,l.Fg)(),s=(0,c.useCallback)((function(){var e=m.toGeoJSON(t),n=function(e){var t=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return e.reduce((function(e,t){return[Math.min(t[0],e[0]),Math.min(t[1],e[1]),Math.max(t[0],e[2]),Math.max(t[1],e[3])]}),t)}(e.coordinates),i="night"===r.colorMode?"mapbox://styles/mapbox/dark-v10":"mapbox://styles/mapbox/outdoors-v11",s=new(u().Map)({container:a.current||"",style:i,bounds:new(u().LngLatBounds)(n),fitBoundsOptions:{padding:{top:40,bottom:40,left:40,right:40}},accessToken:"pk.eyJ1Ijoiam1tYWwiLCJhIjoiY2tobXJhbHpqMHZmYTJwbnVwY21oaXl6byJ9.CZy7LN4IJff9dD5-orrPHw"});s.addControl(new(u().NavigationControl)),s.scrollZoom.disable(),s.on("load",(function(){s.addSource("route",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:e.coordinates}}}),s.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#008DD5","line-width":4}})}))}),[r.colorMode,t]);return(0,c.useEffect)((function(){s()}),[s]),(0,i.jsx)("div",{ref:a,className:n.map})}}}]);
//# sourceMappingURL=804.632bd5ce.chunk.js.map